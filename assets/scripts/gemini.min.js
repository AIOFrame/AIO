document.addEventListener("DOMContentLoaded",function(){$("body").on("click",".modal .ai_fill",function(a){$(a.target).addClass("load");let fields=[];let titles=[];$(".modal .form > div").each(function(b,c){if($(c).children(".slide_set").length===0){if($(c).find("[data-ai]").length>0&&$(c).find("[data-ai]").data("ai")==="ignore"){return true}let id=$(c).find(".lbl").attr("for");let label=$(c).find("[data-ai]").length>0?$(c).find("[data-ai]").data("ai"):$(c).find(".lbl").text().replaceAll("*","").replaceAll("Code","");let key=$(c).find(".lbl").next().data("key");if($(c).children(".aio_upload").length!==0){label="Find royalty-free "+label+" from pexels.com, should be functional direct image url"}if($(c).children(".phone_set").length!==0){titles.push("Calling Code");fields.push({label:"Calling Code",id:$(c).find(".phone_set > div:nth-child(1) .lbl").attr("for"),key:"calling_code"});id=$(c).find(".phone_set > div:nth-child(2) .lbl").attr("for");key="phone"}if($(c).find(".dater").length!==0){id=$(c).find("> input").attr("id");key="date"}titles.push(label);fields.push({label:label,id:id,key:key})}});console.log(fields);let form_title=$(a.target).parent().parent(".modal").find("h2.title:nth-child(1)").text().replaceAll("Add ","");form_title=form_title.endsWith("s")?form_title.slice(0,-1):form_title;let titles_list="";$(titles).each(function(c,b){if(b!==undefined){titles_list+='"'+b+'",'}});let prompt="Filling form to add "+form_title+", suggest me random, not previously suggested and realistic text to fill each of "+titles_list.replace(/,\s*$/,"")+". Very strictly return suggestions as single array without any commentary, explanation, formatting, or extra output.";console.log(prompt);$.ajax({type:"POST",url:location.origin+"/google_gemini",data:{prompt:prompt},success:function(b){console.log(b);b=b.replaceAll("```","").replaceAll("json","");b=JSON.parse(b);if(Array.isArray(b)){$.each(fields,function(c,d){if(typeof b[c]==="string"||b[c] instanceof String){if(fields[c]["key"]==="phone"){$("#"+d.id).val(parseInt(b[c].replaceAll("-","")))}else{$("#"+d.id).val(b[c]).change()}}})}else{alert("Unable to parse response from AI, please try again!")}$(a.target).removeClass("load");file_ui();files_ui()},error:function(b){console.log(b);$(a.target).removeClass("load")}});setTimeout(function(){$(a.target).removeClass("load")},5000)})});