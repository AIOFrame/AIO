document.addEventListener("DOMContentLoaded",function(){$("body").on("click",".modal .ai_fill",function(a){$(a.target).addClass("load");let fields=[];let titles=[];$(".modal .form > div").each(function(b,c){if($(c).children(".slide_set").length===0&&$(c).children(".aio_upload").length===0){let id=$(c).find(".lbl").attr("for");let label=$(c).find(".lbl").text().replaceAll("*","").replaceAll("Code","");titles.push(label);fields.push({label:label,id:id})}});let form_title=$(a.target).parent().parent(".modal").find("h2.title:nth-child(1)").text().replaceAll("Add ","");let prompt="Filling form to add "+form_title+", suggest me realistic text to fill each of "+titles.join(",")+". Respond as single array without commentary.";console.log(prompt);$.ajax({type:"POST",url:location.origin+"/google_gemini",data:{prompt:prompt},success:function(b){console.log(b);b=b.replaceAll("```","").replaceAll("json","");b=JSON.parse(b);console.log(b);if(Array.isArray(b)){$.each(fields,function(c,d){if(typeof b[c]==="string"||b[c] instanceof String){$("#"+d.id).val(b[c])}})}$(a.target).removeClass("load")},error:function(b){console.log(b);$(a.target).removeClass("load")}});setTimeout(function(){},1000)})});