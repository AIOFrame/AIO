document.addEventListener("DOMContentLoaded",function(){let autofill=["t","p","i","v","a","r","t","c","min","max"];$("body").on("click","[data-field-btn]",function(){let parent=$(this).parents(".aio_form_builder");let type=$(this).data("type");let target=$(this).parents("[data-form-builder-field]").data("form-builder-field");let random=Math.floor((Math.random()*1000000)+1);let template=$(parent).find("[data-"+type+"-template]")[0].outerHTML;template=template.replaceAll("data-"+type+'-template=""','data-field="'+type+'" id="'+type+"_"+random+'"');$(parent).find(".aio_form_view").append(template);build_fields(target)}).on("click focus","[data-field]",function(){let parent=$(this).parents(".aio_form_builder");let p=$(parent).find(".aio_field_props");let props=$(this).data();let id=$(this).attr("id");console.log($(this));console.log(id);$("[data-field]").removeClass("on");$(this).addClass("on");$(autofill).each(function(b,c){$(p).find("[data-key="+c+"]").val((props[c]!==undefined?props[c]:""))});$(".aio_field_props").data("target",id);build_fields($(this).parents("[data-form-builder-field]"))}).on("keyup change","[data-form-prop]",function(){let t="#"+$(this).parents(".aio_field_props").data("target");let k=$(this).data("key");let v=$(this).val();$(t).data(k,v);let f=$(t).find("[data-key]");k==="l"?$(t).find("label").html(v):"";k==="l"?f.attr("title",v):"";k==="p"?f.attr("placeholder",v):"";k==="i"?f.attr("data-key",v):"";k==="v"?f.val(v):"";k==="a"?f.attr("data-a",v):"";k==="min"?f.attr("minlength",v):"";k==="max"?f.attr("maxlength",v):"";k==="c"?$(t).attr("class","").addClass("col-12 col-md-"+v).find("[data-key]").attr("data-c",v):"";k==="r"&&$(f).is(":checked")?f.attr("required",true):f.attr("required",false);k==="tr"&&$(f).is(":checked")?f.attr("data-l","true"):f.attr("data-l","false");console.log(k);console.log(v);build_fields($(this).parents("[data-form-builder-field]"))})});function build_fields(a){let data=[];let fields=$(a).find("[data-field]");$(fields).each(function(c,b){let f=$(b).find("[data-key]");console.log($(f));console.log($(f).data("key"));let o={t:$(b).data("field"),i:$(f).attr("data-key"),p:$(f).attr("placeholder"),l:$(f).attr("title"),v:$(f).val(),a:$(f).attr("data-a"),c:$(f).attr("data-c"),tr:$(f).attr("data-tr")==="true",r:$(f).attr("required")};data.push(o)});$(a).prev().find("[data-key]").val(JSON.stringify(data))}function render_fields(a){};