$(document).ready(function(){if(!$("[data-alerts]").length){$("body").append('<div class="t r" data-alerts></div>')}reload_alerts();$("body").on("click",".alert .close",function(){let alert=$(this).parents(".alert");let timer=$(alert).data("timer");clearInterval(timer);$(alert).addClass("out");setTimeout(function(){$(alert).remove()},600)}).on("click","[data-clear-alert]",function(){let act=$(this).parents(".alerts").data("action");let id=$(this).parent().data("id");post(act,{id:id},"","","","","post_clear_alert")}).on("click","[data-clear-alerts]",function(){let id=$(this).parent().data("id");post($(this).data("action"),{id:id},"","","","","post_clear_alerts")})});function alert(d,c,b,a){notify(d,c,b,a)}function notify(d,c,b,a){c=c!==undefined&&c!==""&&c>0?c*1000:6000;let r=Math.random().toString(36).substring(7);let template=$("[alert-html-template]").html();let ico=a!==undefined&&a!==""?'<div class="ico"><div class="mat-ico bi bi-bell-fill">'+a+"</div></div>":"";let n=template.replaceAll("{{random}}",r).replaceAll("{{icon}}",a).replaceAll("{{text}}",d).replaceAll("{{type}}",b);let id=".n_"+r;let ns=$("[data-alerts]");let perc=100;let timer=setInterval(function(){perc--;$(id+" .time").css({width:"calc("+perc+"% - 20px)"})},(c+400)/100);setTimeout(function(){clearInterval(timer)},c);if(ns.hasClass("b")){ns.prepend(n);$(ns).find(">div:first-child").data("timer",timer).attr("timer",timer)}else{ns.append(n);$(ns).find(">div:last-child").data("timer",timer).attr("timer",timer)}setTimeout(function(){$(id).removeClass("in")},100);setTimeout(function(){$(id).addClass("out")},c+1000);setTimeout(function(){$(id).remove()},c+2000)}function reload_alerts(){}function post_reload_alerts(a){console.log("load");console.log(a)}function post_clear_alert(a){if(a[0]===1){$('[data-id="'+a[1]+'"]').remove()}}function post_clear_alerts(a){if(a[0]===1){$("[data-aio-alerts]").html("")}};