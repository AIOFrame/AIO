let debug=!!$("body").hasClass("debug");$(document).ready(function(){let b=$("body");if($("[data-color-picker]").length>0){$("[data-color-picker][data-preview]").each(function(e,d){if($(d).val()!==""){$($(d).data("preview")).css("background",'var(--input_bg) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"><rect rx="12" ry="12" width="22" height="22" style="fill:%23'+$(d).val().substring(1)+"\" /></svg>') no-repeat calc(100% - 5px) center / 22px")}});let html_code=$("[color-picker-html]").html();$("[color-picker-html]").remove();$(html_code).appendTo(b)}$(b).on("click","[data-color-picker]",function(){$(".color_picker_wrap").addClass("on");init_color_picker($(this),$(this).val())}).on("click",".color_picker_wrap .close",function(){$(".color_picker_wrap").removeClass("on").children(".color-picker").html("");let removeFade=[];$(".modal").each(function(e,d){if($(d).hasClass("on")){removeFade.push(1)}});if(removeFade.length===0){$("article").removeClass("fade")}}).on("keyup",".color_picker_wrap input",function(){let target=$(".color-picker").data("target");let v=$(this).val();let vl=v.length;if(vl===4||vl===7){$(target).val(v);init_color_picker(target,v);generate_background(target,v)}})});function init_color_picker(d,a){$("article").addClass("fade");let cp=$(".color-picker");let current_value=$(d).val();$(cp).html("");$(cp).data("target",($(d).data("target")!==undefined?$(d).data("target"):d));$(cp).data("background")!==undefined?$(cp).data("background",$(d).data("background")):"";$(".color_picker_wrap .code").val(current_value);let v={};let c=a!==undefined?a:(current_value===""||current_value===undefined?"#aaaaaa":current_value);let types={box:[{component:iro.ui.Box},{component:iro.ui.Slider,options:{sliderType:"hue"}}],wheel:[{component:iro.ui.Wheel}]};v.color=c!==undefined?c:($(d).val()!==""&&$(d).val()!==undefined?$(d).val():"#aaaaaa");v.width=$(d).data("width")!==""&&$(d).data("width")!==undefined?$(d).data("width"):"300";v.layout=$(d).data("type")!==""&&$(d).data("type")!==undefined?types[$(d).data("type")]:types.box;let colorPicker=new iro.ColorPicker("."+cp.attr("class"),v);$(".color_picker_wrap input").focus();colorPicker.on("color:change",onColorChange)}function onColorChange(a){let cp=$(".color-picker");let target=$(cp).data("target");if(target!==undefined){target.val(a.hexString);if(target.data("border")!==undefined&&$(target.data("border")).length){$(target.data("border")).css("border","1px solid #"+a.hexString.substring(1))}if(target.data("background")!==undefined&&$(target.data("background")).length){$(target.data("background")).css("background-color",a.hexString)}if(target.data("preview")!==undefined&&$(target.data("preview")).length){generate_background(target.data("preview"),a.hexString)}}$(".color_picker_wrap input").val(a.hexString)}function generate_background(d,a){$(d).css("background",'var(--input_bg) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"><rect rx="12" ry="12" width="22" height="22" style="fill:%23'+a.substring(1)+"\" /></svg>') no-repeat calc(100% - 5px) center / 22px")};