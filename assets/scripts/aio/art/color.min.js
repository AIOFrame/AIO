let debug=!!$("body").hasClass("debug");$(document).ready(function(){let b=$("body");if($("[data-color-picker]").length>0){$("[data-color-picker][data-preview]").each(function(e,d){if($(d).val()!==""){$($(d).data("preview")).css("background",'var(--input_bg_light) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"><rect rx="12" ry="12" width="22" height="22" style="fill:%23'+$(d).val().substring(1)+"\" /></svg>') no-repeat calc(100% - 5px) center / 22px")}});$('<div class="color_picker_wrap"><div class="color-picker"></div><div class="controls"><input type="text" value="#ffffff" class="code"></div><div class="close">close</div></div>').appendTo(b)}$(b).on("click","[data-color-picker]",function(){$(".color_picker_wrap").addClass("on");init_color_picker($(this),$(this).val())}).on("click",".color_picker_wrap .close",function(){$(".color_picker_wrap").removeClass("on").children(".color-picker").html("");let removeFade=[];$(".modal").each(function(e,d){if($(d).hasClass("on")){removeFade.push(1)}});if(removeFade.length===0){$("article").removeClass("fade")}}).on("keyup",".color_picker_wrap input",function(){if($(this).val().length>3){init_color_picker($(this),$(this).val())}})});function init_color_picker(d,a){$("article").addClass("fade");let cp=$(".color-picker");$(cp).html("");$(d).data("value")!==undefined?$(cp).data("value",$(d).data("value")):$(cp).data("value",$(d));$(d).data("background")!==undefined?$(cp).data("background",$(d).data("background")):"";let v={};let c=a===""||a===undefined?"#aaaaaa":a;v.color=$(d).val()!==""&&$(d).val()!==undefined?$(d).val():c;v.width=$(d).data("width")!==""&&$(d).data("width")!==undefined?$(d).data("width"):"300";let types={box:[{component:iro.ui.Box},{component:iro.ui.Slider,options:{sliderType:"hue"}}],wheel:[{component:iro.ui.Wheel}]};v.layout=$(d).data("type")!==""&&$(d).data("type")!==undefined?types[$(d).data("type")]:types.box;let colorPicker=new iro.ColorPicker(".color-picker",v);colorPicker.on("color:change",onColorChange)}function onColorChange(a){let cp=$(".color-picker");let v=$(cp).data("value");if(v!==undefined){v.val(a.hexString);if(v.data("border")!==undefined&&$(v.data("border")).length){$(v.data("border")).css("border","1px solid #"+a.hexString.substring(1))}if(v.data("background")!==undefined&&$(v.data("background")).length){$(v.data("background")).css("background-color",a.hexString)}if(v.data("preview")!==undefined&&$(v.data("preview")).length){$(v.data("preview")).css("background",'var(--input_bg_light) url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"><rect rx="12" ry="12" width="22" height="22" style="fill:%23'+a.hexString.substring(1)+"\" /></svg>') no-repeat calc(100% - 5px) center / 22px")}}$(".color_picker_wrap input").val(a.hexString)};