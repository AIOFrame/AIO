if(typeof window.elog==="undefined"){window.elog=function(b){if($("body").hasClass("debug")){console.log(b)}}}function get_values(c,e,b){let a=e;a=a!==undefined&&a!==""?"[data-"+a+"]":"";let pre=b;pre=pre!==undefined&&pre!==""?pre:"";let data={};$(c).find(":input"+a+":not(:button)","select"+a,"textarea"+a).each(function(){let pre_key;let name=$(this).attr("name");name=name!==undefined?name.replace("[]",""):undefined;let key=$(this).data("key");let id=$(this).attr("id");if(key!==undefined){pre_key=pre+key}else{if(id!==undefined){pre_key=pre+id}else{if(name!==undefined){pre_key=pre+name}else{pre_key=pre+$(this).attr("class")}}}let m=$(c).find("[name="+name+"]");let value;value=$(this).hasClass("fn")?ufn($(this).val()):$(this).val();if($(this).attr("type")==="checkbox"){let t=$(this).is(":checked");let arr=$(this).data("array");let v=$(this).val();if($(this).hasClass("slide")){elog(0);value=$(this).is(":checked")?1:2}else{if(arr!==undefined){elog(1);if(data[pre_key]===undefined||!$.isArray(data[pre_key])){data[pre_key]=[]}if(t){data[pre_key].push(v)}}else{if(m.length>1){elog(2);value=$("[name="+$(this).attr("name")+"]").map(function(){if(t){return $(this).val()}}).toArray()}else{elog(3);value=t===true?1:2}}}}else{if($(this).attr("type")==="radio"){key=$(this).is(":checked")?$(this).attr("name"):"";key=$(this).data("key")!==undefined?$(this).data("key"):key;v=$("input[name="+$(this).attr("name")+"]:checked").val();value[pre_key]=v;return true}else{if($(this).is("select")&&$(this).attr("multiple")!==undefined){value=$(this).val().join(", ")}}}if($(this).data("array")!==undefined){elog(pre_key);let arr=$(this).data("array");key=$(this).val()!==""?$(this).attr("name"):"";key=key===""?$(this).attr("id"):key;let key2=$(this).data("key")!==undefined?$(this).data("key"):key;data[arr]=data[arr]===undefined?{}:data[arr];$(this).val()!==""?data[arr][key2]=value:""}else{data[pre_key]=value}elog(key);elog("Updated:");elog(data)});$.each(data,function(g,f){if(typeof f==="object"&&f!==null){elog(f);elog(JSON.stringify(f));data[g]=JSON.stringify(f)}});return data}function get_checkbox_values(c,b){let d=[];$("[name="+c+"]").each(function(f,e){$(e).is(":checked")?d.push($(e).val()):""});if(b){return d.join(", ")}else{return d}}function email_valid(b){let v=_email_valid(b);!v?$(b).removeClass("empty"):$(b).addClass("empty");if(v&&$(b).data("valid-email-notify")!==undefined&&$(b).data("valid-email-notify")!==""){notify($(b).data("valid-email-notify"))}return v}function _email_valid(b){let pattern=/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;return !pattern.test($(b).val())}function is_empty(b,c){c=c===undefined||c===""?"":"["+c+"]";let result;if($(b)[0]&&($(b)[0].localName==="div"||$(b)[0].localName==="tr"||$(b)[0].localName==="form")){let r=[];$.each($(b).find("input"+c+",select"+c+",textarea"+c),function(f,e){if(e!==undefined&&$(e).val()!==null&&$(e).val()!==""){$(e).removeClass("empty");r.push(false)}else{$(e).addClass("empty");r.push(true);if($(b).data("empty-notify")!==undefined&&$(b).data("empty-notify")!==""){notify($(b).data("empty-notify"))}}});result=$.inArray(true,r)!==-1}else{if($(b).val()!==null&&$(b).val()!==""){$(b).removeClass("empty");result=false}else{$(b).addClass("empty");result=true}if(result&&$(b).data("empty-notify")!==undefined&&$(b).data("empty-notify")!==""){notify($(b).data("empty-notify"))}}return result}function _is_empty(b,c){c=c===undefined||c===""?"":"[data-"+c+"]";if($(b)[0]&&($(b)[0].localName==="div"||$(b)[0].localName==="tr"||$(b)[0].localName==="form")){let r=[];$.each($(b).find("input"+c+",select"+c+",textarea"+c),function(f,e){if(e!==undefined&&$(e).val()!==null&&$(e).val()!==""){r.push(false)}else{elog(e);r.push(true)}});return $.inArray(true,r)!==-1}else{return $(b).val().length<=0}}function clear(b,c){if($(b)[0]&&($(b)[0].localName==="div"||$(b)[0].localName==="tr"||$(b)[0].localName==="form")){elog($(b)[0].localName);$.each($(b).find("input"+c+",select"+c+",textarea"+c),function(f,e){$(e).val("")})}else{$(b).val("")}}function process_data(b){let p;if($(b).parents("[data-t]")!==undefined&&$(b).parents("[data-t]")!==null&&$(b).parents("[data-t]").length>0){p=$(b).parents("[data-t]");$(p).find('[onclick="process_data(this)"]').attr("disabled",true).addClass("load");setTimeout(function(){$(p).removeClass("load").find('[onclick="process_data(this)"]').attr("disabled",false).removeClass("load")},5000);elog($(b).parents("[data-t]"))}else{p=$(b);$(p).attr("disabled",true).addClass("load");setTimeout(function(){$(p).attr("disabled",false).removeClass("load")},5000)}if($(p).data("confirm")!==undefined){if(!confirm($(p).data("confirm"))){return}}elog(p);p=(p.length!==0&&p[0].tagName==="DIV")?p:$(b).parents("[data-data]");p.addClass("load");let pre=$(p).data("pre");pre=pre!==undefined?pre:"";let data=$(p).data("data");data=data!==undefined?data:"";if(is_empty(p,"required")){$(p).removeClass("load");$(b).attr("disabled",false).removeClass("load");let empty_note=$(p).data("empty")!==undefined?$(p).data("empty"):"Input fields seem to be empty! Please fill and try again!!";notify(empty_note);return}let d=get_values(p,data,pre);elog(d);d.action=$(b).data("action");d.t=$(p).data("t");d.pre=pre;elog(d);let pos=$(p).data("post");if(pos!==undefined&&pos!==null){d.post=pos}if(d.action===undefined||d.action===null){elog("Action not set!")}let types=Array("id","by","action","h","d","dt","alerts","emails");$.each(types,function(c,e){if($(p).data(e)!==undefined&&$(p).data(e)!==""){d[e]=$(p).data(e)}});elog(d);let cb=p.data("callback")!==""&&p.data("callback")!==undefined?"process_finish,"+p.data("callback"):"process_finish";post(d.action,d,p.data("notify"),p.data("reload"),p.data("redirect"),0,cb,p.data("reset"),p)}function process_finish(c,b){$(c).removeClass("load").find('[onclick="process_data(this)"]').attr("disabled",false).removeClass("load");elog(c)}function edit_data(c,b){let t=$(c).data("t")?$($(c).data("t")):$(b);let data=$(c).data("data");if(!$(t).hasClass("on")){$(t).addClass("on")}$("article").addClass("fade");$(b).find("[data-add]").hide();$(b).find("[data-update],[data-edit]").show();$.each(data,function(e,f){if(f===null){return}if(e==="id"){t.data("id",f).find("[data-t]").data("id",f);$(t).hasClass("modal")?t.addClass("on"):""}else{let el=$(t).find("[data-key="+e+"]");if(el.attr("type")==="checkbox"){if(el.data("key")!==undefined){f=!$.isArray(f)?JSON.parse(f):[f];if($.isArray(f)){$(f).each(function(h,g){let s=$("[data-key="+e+"][value="+g+"]");f===1||f==="1"||f===true||f.length>0?s.prop("checked",true):s.prop("checked",false)})}else{f===1||f==="1"||f===true||f.length>0?el.prop("checked",true):el.prop("checked",false)}}else{let s=$("[data-key="+e+"][value="+f+"]");f===1||f==="1"||f===true||f.length>0?s.prop("checked",true):s.prop("checked",false)}}else{if(el.attr("type")==="radio"){let s=$("[data-key="+e+"][value="+f+"]");f==="1"||f===true||f.length>0?s.prop("checked",true):s.prop("checked",false)}else{if(el.prop("type")==="select-multiple"){$(el).val(f.split(", ")).trigger("change")}else{let tar="#"+e;console.log(tar);if($(tar).length){$(tar).val(f).trigger("change")}else{if(el.data("hidden-date")!==undefined){elog(el);let date=new Date(f);elog(date);elog("#"+el.attr("id")+"_alt");$("#"+el.attr("id")+"_alt").val([("0"+date.getDate()).slice(-2),("0"+date.getMonth()).slice(-2),date.getFullYear()].join("-")).trigger("change")}el.val(f).trigger("change")}}}}}});typeof files_ui==="function"?files_ui():"";typeof file_ui==="function"?file_ui():""}function update_data(k,h,j,g,f,c,i,b){let data={action:h,target:j,keys:g,values:f,logic:c};let con=$(k).data("confirm")!==undefined&&$(k).data("confirm")!==""?$(k).data("confirm"):"Are you sure to update ?";let n=i!==undefined&&i!==""?i:2;let r=b!==undefined&&b!==""?b:2;if(confirm(con)){post(h,data,n,r)}}function trash_data(i,f,h,c,g,b){let data={action:f,target:h,logic:c};let con=$(i).data("confirm")!==undefined&&$(i).data("confirm")!==""?$(i).data("confirm"):"Are you sure to delete ?";let n=g!==undefined&&g!==""?g:2;let r=b!==undefined&&b!==""?b:2;if(confirm(con)){post(f,data,n,r)}}function post(action,data,notify_time,reload_time,redirect,redirect_time,callback,reset,p){let d=$.extend({},{action:action},data);$.post(location.origin,d,function(r){try{r=JSON.parse(r);if(notify_time!==undefined&&notify_time!==""){elog(r);elog($(p).data("success"));if(r[0]===1&&$(p).data("success")!==undefined){notify($(p).data("success"),notify_time)}else{notify(r[1],notify_time)}}if(r[0]!==0&&reload_time!==undefined&&reload_time!==""&&reload_time!=="0"){$.isNumeric(reload_time)?setTimeout(function(){location.reload()},reload_time*1000):location.href=reload_time}if(r[0]!==0&&reset!==undefined&&reset!==""&&reset!=="0"){$("[data-"+reset+"]").val("")}if(redirect!==undefined&&redirect!==""){redirect_time=redirect_time!==undefined&&redirect_time!==""?redirect_time:reload_time;if(r[0]!==0){setTimeout(function(){location.href=redirect},redirect_time*1000)}}elog(callback);if(callback!==undefined&&callback!==""){let calls=callback.split(",");$.each(calls,function(i,call){eval(call+"("+JSON.stringify(r)+")")})}}catch(rat){if(callback!==undefined&&callback!==""){callback=callback.split(",");$.each(callback,function(i,call){eval(call+"("+JSON.stringify(r)+")")})}}})}function redirect(b){elog(b)}function reload(b){let t=b!==undefined&&b!==""?b*1000:5000;setTimeout(function(){location.reload()},t)};