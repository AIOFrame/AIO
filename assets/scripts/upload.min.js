$(document).ready(function(){$(document).mouseup(function(a){var b=$("#file_uploader");if(!b.is(a.target)&&b.has(a.target).length===0){b.hide()}});$("body").on("click",".fup_file",function(){$(".fup_file").removeClass("on");$(this).toggleClass("on")}).on("click",".files_insert",function(){}).on("click",".files_delete",function(){}).on("click","#file_uploader .close",function(){$(this).parents("#file_uploader").hide()}).on("change","#file_input",function(){var a=this.files;process_upload(a)}).bind("dragover",".file_modal",function(a){a.stopPropagation();a.preventDefault();$(this).addClass("hover")}).bind("dragleave",".file_modal",function(a){a.stopPropagation();a.preventDefault();$(this).removeClass("hover")}).bind("drop",".file_modal",function(){e.stopPropagation();e.preventDefault()}).on("click","#file_uploader .files_insert",function(){var b=$("#file_uploader");var a=$("#file_uploader .fup_file.on");if(b.data("url")!==undefined&&b.data("url")!==""){if(a){$(b.data("url")).val(a.data("url"))}}if(b.data("s_img")!==undefined&&b.data("s_img")!==""){if(a){$(b.data("s_img")).html("").append('<img width="150" height="150" src="'+b.data("dir")+a.data("url")+'">')}}if(b.data("bg")!==undefined&&b.data("bg")!==""){if(a){$(b.data("bg")).css({"background-image":'url("'+b.data("dir")+a.data("url")+'")'})}}if(b.data("id")!==undefined&&b.data("id")!==""){if(a){$(b.data("id")).val(a.data("id"))}}$("#file_uploader").hide()})});function file_upload(a){$("#file_uploader").show().data("exts",$(a).data("exts")).data("url",$(a).data("url")).data("bg",$(a).data("bg")).data("id",$(a).data("id")).data("s_img",$(a).data("s_img")).data("path",$(a).data("path")).data("scope",$(a).data("scope"));if($(a).data("nodelete")!==undefined){$("#file_uploader").find(".files_delete").hide()}}function process_upload(a){for(var c=0,h;h=a[c];c++){var b=$("#file_uploader").data("exts");if(b){b=b.split(",");var g=h.name.split(".")[1];if(b.indexOf(g)<0){return[false,"Extension Restricted","The file should be one of the extensions "+b]}}var j=new FormData();j.append(c,h);j.append("action","file_process");if($("#file_uploader").data("path")!==""&&$("#file_uploader").data("path")!==undefined){j.append("path",$("#file_uploader").data("path"))}if($("#file_uploader").data("scope")!==""&&$("#file_uploader").data("scope")!==undefined){j.append("scope",$("#file_uploader").data("scope"))}$.ajax({url:location.origin,type:"POST",data:j,contentType:false,cache:false,processData:false,success:function(f){var i=$.parseJSON(f);if(i[0]==="success"){$("#file_uploader .uploaded_files").append('<div class="fup_file" data-url="'+i[3]+'">'+i[2]+"</div>");return[true,"File Uploaded Successfully",i]}else{return[true,"File Uploaded Failed","There was an issue while sending file to server, please try again"]}}})}}function remove_file(){};