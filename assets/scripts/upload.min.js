$(document).ready(function(){$(document).mouseup(function(a){var b=$("#file_uploader");if(!b.is(a.target)&&b.has(a.target).length===0){b.hide()}});$("body").on("click",".fup_file",function(){$(".fup_file").not(this).removeClass("on");$(this).toggleClass("on");elog($(this).data("delete"));if($(this).data("delete")!==""&&$(this).data("delete")!==undefined){if($(this).data("delete")===0){$("#file_uploader .files_delete").addClass("disabled")}else{if($(this).data("delete")===1){$("#file_uploader .files_delete").removeClass("disabled")}}}}).on("click",".files_delete",function(){}).on("click","#file_uploader .close",function(){$(this).parents("#file_uploader").slideUp()}).on("change","#file_input",function(){var a=this.files;process_upload(a)}).bind("dragover",".file_modal",function(a){a.stopPropagation();a.preventDefault();$(this).addClass("hover")}).bind("dragleave",".file_modal",function(a){a.stopPropagation();a.preventDefault();$(this).removeClass("hover")}).bind("drop",".file_modal",function(){e.stopPropagation();e.preventDefault()}).on("click","#file_uploader .files_insert",function(){var b=$("#file_uploader");var a=$("#file_uploader .fup_file.on");if(b.data("url")!==undefined&&b.data("url")!==""){if(a){$(b.data("url")).val(a.data("url"))}}if(b.data("s_img")!==undefined&&b.data("s_img")!==""){if(a){$(b.data("s_img")).html("").append('<img width="150" height="150" src="'+b.data("dir")+a.data("url")+'">')}}if(b.data("bg")!==undefined&&b.data("bg")!==""){if(a){$(b.data("bg")).css({"background-image":'url("'+b.data("dir")+a.data("url")+'")'})}}if(b.data("id")!==undefined&&b.data("id")!==""){if(a){$(b.data("id")).val(a.data("id"))}}$("#file_uploader").slideUp();setTimeout(function(){var c=a.length>0?"File Selected Successfully!":"NO FILE SELECTED! File Uploader Closed!!";$(".file_notify").html(c).addClass("on")},500);setTimeout(function(){$(".file_notify").removeClass("on")},1600)})});function file_upload(a){$("#file_uploader").slideDown().data("exts",$(a).data("exts")).data("url",$(a).data("url")).data("bg",$(a).data("bg")).data("id",$(a).data("id")).data("s_img",$(a).data("s_img")).data("path",$(a).data("path")).data("scope",$(a).data("scope"));if($(a).data("delete")===undefined){if($("#file_uploader .files_delete").length!==0){$(".files_delete").hide()}$("#file_uploader").data("delete",false)}else{$(".files_delete").show();$("#file_uploader").data("delete",true)}}function process_upload(a){for(var c=0,h;h=a[c];c++){var b=$("#file_uploader").data("exts");if(b){b=b.split(",");var g=h.name.split(".")[1];if(b.indexOf(g)<0){return[false,"Extension Restricted","The file should be one of the extensions "+b]}}var j=new FormData();j.append(c,h);j.append("action","file_process");if($("#file_uploader").data("path")!==""&&$("#file_uploader").data("path")!==undefined){j.append("path",$("#file_uploader").data("path"))}if($("#file_uploader").data("scope")!==""&&$("#file_uploader").data("scope")!==undefined){j.append("scope",$("#file_uploader").data("scope"))}if($("#file_uploader").data("delete")!==""&&$("#file_uploader").data("delete")!==undefined&&$("#file_uploader").data("delete")){j.append("delete","true")}else{j.append("delete","false")}$("#file_uploader .uploaded_files").prepend('<div class="uploading"><div class="name">'+h.name+'</div><div class="perc"><span>0</span>%</div><div class="progress"><div></div></div></div>');elog(j);$.ajax({url:location.origin,type:"POST",data:j,contentType:false,cache:false,processData:false,xhr:function(){var d=$.ajaxSettings.xhr();if(d.upload){d.upload.addEventListener("progress",upload_progress,false)}return d},success:function(k){$("#file_uploader .uploading").remove();var l=$.parseJSON(k);if(l[0]==="success"){$("#file_uploader .no_uploaded_files").remove();var i=parseInt(l[6])>1024?(parseFloat(l[6])/1024).toFixed(2)+" MB":l[6]+" KB";var f=$.inArray(l[5],Array("svg","jpg","png","jpeg"))>-1?"style=\"background-image:url('"+l[7]+"')\"":"";$("#file_uploader .uploaded_files").prepend('<div class="fup_file new '+l[5]+'" data-id="'+l[4]+'" data-url="'+l[3]+'" '+f+'><div class="name">'+l[2]+'</div><div class="size">'+i+"</div></div>");$("#file_uploader .fup_file").removeClass("on");$(".file_notify").html("File Uploaded Successfully!").addClass("on");setTimeout(function(){$(".file_notify").removeClass("on")},1000);setTimeout(function(){$(".fup_file").removeClass("new")},3000);return[true,"File Uploaded Successfully",l]}else{return[true,"File Uploaded Failed","There was an issue while sending file to server, please try again"]}}})}}function upload_progress(d){if(d.lengthComputable){var a=d.total;var c=d.loaded;var b=Math.round((c*100)/a);$("#file_uploader .progress>div").css({width:b+"%"});$("#file_uploader .uploading .perc>span").html(b);if(b>=100){}}}function remove_file(){};