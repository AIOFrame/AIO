let loc={lat:25.212212,lng:55.275135};$(document).ready(function(){setTimeout(function(){$.each($("div[data-google-map-render]"),function(b,c){GoogleMap(c,window.google_maps_key)})},2900)});window.google_maps_key=undefined;window.google_map_icon=undefined;function GoogleMap(f,c){if(c===""){elog("Google Maps Key Error, Option 'google_maps_key' is missing in options database or pass key as second parameter in GoogleMaps(e, key)");return}loc.lat=$(f).attr("lat")?parseFloat($(f).attr("lat")):loc.lat;loc.lng=$(f).attr("long")?parseFloat($(f).attr("long")):loc.lng;let con={center:loc};con.zoom=$(f).attr("level")?parseInt($(f).attr("level")):13;con.mapTypeId=$(f).attr("type")?$(f).attr("type"):"roadmap";con.styles=$(f).attr("design")?$(f).attr("design"):"";con.scrollwheel=false;con.streetViewControl=$(f).attr("streetview")?$(f).attr("streetview"):false;if($(f).data("types")){let mapTypeControlOptions={mapTypeIds:$(f).data("types").split(",")};con.mapTypeControlOptions=mapTypeControlOptions}con.zoomControl=true;const d=new google.maps.Map($(f)[0],con);console.log($("#"+$(f).attr("search"))[0]);const b=$("#"+$(f).attr("search"))[0];const g=new google.maps.places.SearchBox(b);let marker;if($(f).data("marks")){let marks=$(f).data("marks");if(marks.length>0){$.each(marks,function(h,e){let loc={lat:e.lat,lng:e["long"]};let ico={url:e.ico,scaledSize:new google.maps.Size(50,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)};marker=new google.maps.Marker({position:loc,icon:ico,map:d,title:e.title,size:new google.maps.Size(25,25)});if(e.center){let center=new google.maps.LatLng(e.lat,e["long"]);d.panTo(center)}})}}else{marker=new google.maps.Marker({position:loc,icon:window.google_map_icon,map:d,draggable:true});marker.addListener("dragend",function(){z=d.getZoom();let pos={lat:this.position.lat(),lng:this.position.lng()};GMapValues(f,marker,pos)})}g.addListener("places_changed",function(){const h=g.getPlaces();if(h.length==0){return}const i=new google.maps.LatLngBounds();if(h.length>0){const e=h[0];if(!e.geometry||!e.geometry.location){console.log("Returned place contains no geometry");return}marker.setPosition(e.geometry.location);let pos={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()};GMapValues(f,marker,pos);if(e.geometry.viewport){i.union(e.geometry.viewport)}else{i.extend(e.geometry.location)}}d.fitBounds(i)})}function GMapValues(d,b,c){$($(d).data("gps")).val(b.position.lat()+","+b.position.lng());$($(d).data("coordinates")).val(b.position.lat()+","+b.position.lng());$($(d).data("lat"),$(d).data("latitude")).val(b.position.lat());$($(d).data("long"),$(d).data("longitude")).val(b.position.lng());if($(d).data("area")||$(d).data("city")||$(d).data("state")||$(d).data("country")||$(d).data("country_code")||$(d).data("location")){let gc=new google.maps.Geocoder();gc.geocode({location:c},function(f,e){if(e==="OK"){if(f[0]["address_components"]){let a=f[0]["address_components"];let a1=a[0]!==undefined&&a[0].long_name!=="undefined"?a[0].long_name.replace('"',"").replace("'",""):"";let a2=a[1]!==undefined&&a[1].long_name!=="undefined"?a[1].long_name.replace('"',"").replace("'",""):"";let a3=a[2]!==undefined&&a[2].long_name!=="undefined"?a[2].long_name.replace('"',"").replace("'",""):"";let name=f[0]["formatted_address"];$($(d).data("name")).val(name).trigger("change");let address=a1+" "+a2+" "+a3;$($(d).data("address")).val(address).trigger("change");let area=a[2]!==undefined&&a[2].long_name!=="undefined"?a[2].long_name.replace('"',"").replace("'",""):"";$($(d).data("area")).val(area).trigger("change");let city=a[3]!==undefined&&a[3].long_name!=="undefined"?a[3].long_name.replace('"',"").replace("'",""):"";$($(d).data("city")).val(city).trigger("change");let state=a[4]!==undefined&&a[4].long_name!=="undefined"&&a[4].long_name!==city?a[4].long_name.replace('"',"").replace("'",""):"";$($(d).data("state")).val(state).trigger("change");let country=a[5]!==undefined&&a[5].long_name!==undefined?a[5].long_name.replace('"',"").replace("'",""):"";$($(d).data("country")).val(country).trigger("change");let code=a[5]!==undefined&&a[5].short_name!=="undefined"?a[5].short_name.replace('"',"").replace("'",""):"";$($(d).data("country_code")).val(code).trigger("change");$($(d).data("location")).val(area+", "+city+" "+state+", "+country).trigger("change")}}else{elog("Geocoder failed due to: "+status)}})}};